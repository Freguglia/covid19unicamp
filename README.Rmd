---
title: "Modelos Preditivos para COVID-19"
author: "COVID-19 FT - UNICAMP"
date: "3/31/2020"
output:
  html_document:
    keep_md: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Obtenção de Dados

Afim de simplificar o acesso aos dados, utilizou-se o pacote `coronabr`, que importa diariamente os dados compilados pela iniciativa [Brasil IO](http://www.brasil.io). Pode ser o caso de se considerar a redução de dependências e acessar os dados diretamente da plataforma supracitada, entretanto há facilidades implementadas no `coronabr` que podem ser úteis. Para que colaboradores que não utilizam o R como plataforma analítica, o arquivo `covid19_cidades.csv` possui os dados (por cidade) disponíveis hoje (`r date()`).

```{r, message=FALSE, warning=FALSE}
library(coronabr)
library(tidyverse)
covid19_cidades = get_corona_br()
write_csv(covid19_cidades, "covid19_cidades.csv")
unlink("output", recursive=TRUE)
```

## Manipulação de dados

Abaixo, são apresentados dados da cidade de São Paulo, apenas por esta ter sido a cidade onde foi identificado o paciente zero do Brasil e haver um histórico maior de informações, que podem ser úteis para a modelagem de casos e óbitos.

#### TODO

  * Observar ocorrências de zeros na coluna `confirmed` (vide 24/03/2020)

```{r, message=FALSE, warning=FALSE}
casos_sp = covid19_cidades %>% filter(city == "São Paulo") %>% 
  select(-state, -place_type, -is_last, -city_ibge_code)
casos_sp %>% head() %>% knitr::kable("markdown")
casos_sp %>% select(date, confirmed, deaths) %>% gather(type, counts, -date) %>% 
  ggplot(aes(date, counts, colour=type)) + geom_point() + geom_line() + scale_y_log10() +
  theme_bw() + xlab("Data") + ylab("Contagem")
```

